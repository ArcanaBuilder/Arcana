#!/usr/bin/arcana

COMPILER = g++

@profile Debug
FLAGS    = -std=c++17 -g3 -O0 -Wall -Wextra -pedantic -DDEBUG

@profile Release
FLAGS    = -std=c++17 -Os -Wall -Wextra -DRELEASE

TARGET   = app
MODE     = Release

BUILD    = Build
SOURCE   = Source/**.c
EXCLUDE  = 

COMMANDS = Build Clean Install

###########################
# BUILT-IN TASKS
###########################

@folder
@file
task Clean(BUILD);

@always
task Install(TARGET);

###########################
# OVERRIDED BUILT-IN TASKS
###########################

@profile
task Build()
{
    COMPILER FLAGS SOURCE -o TARGET
}

###########################
# PRE BUILD TASKS
###########################

@precompiler 
task Create_Folders() 
{
    mkdir BUILD
    mkdir test
}

###########################
# POST BUILD TASKS
###########################

@callable
@postcompiler 1
task Say_Something(msg) { echo msg }

###########################
# POST BUILD TASKS CALL
###########################

Say_Something('All Done!');