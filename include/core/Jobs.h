#ifndef __ARCANA_JOBS_H__
#define __ARCANA_JOBS_H__



///////////////////////////////////////////////////////////////////////////////
// INCLUDES
///////////////////////////////////////////////////////////////////////////////


#include "Defines.h"
#include "Semantic.h"


///////////////////////////////////////////////////////////////////////////////
// module namespace
///////////////////////////////////////////////////////////////////////////////

BEGIN_MODULE(Jobs)

USE_MODULE(Arcana);


//         ██  ██████  ██████  ███████     ███████  ██████  ██████  ██     ██  █████  ██████  ██████  ███████ ██████  
//         ██ ██    ██ ██   ██ ██          ██      ██    ██ ██   ██ ██     ██ ██   ██ ██   ██ ██   ██ ██      ██   ██ 
//         ██ ██    ██ ██████  ███████     █████   ██    ██ ██████  ██  █  ██ ███████ ██████  ██   ██ █████   ██   ██ 
//    ██   ██ ██    ██ ██   ██      ██     ██      ██    ██ ██   ██ ██ ███ ██ ██   ██ ██   ██ ██   ██ ██      ██   ██ 
//     █████   ██████  ██████  ███████     ██       ██████  ██   ██  ███ ███  ██   ██ ██   ██ ██████  ███████ ██████  
//                                                                                                                    
//                                                                                                                    
//    ████████ ██    ██ ██████  ███████ ███████                                                                       
//       ██     ██  ██  ██   ██ ██      ██                                                                            
//       ██      ████   ██████  █████   ███████                                                                       
//       ██       ██    ██      ██           ██                                                                       
//       ██       ██    ██      ███████ ███████                                                                       
//                                                                                                                    
//                                                                                                                    

class Job;




//         ██  ██████  ██████  ███████     ██    ██ ███████ ██ ███    ██  ██████  ███████ 
//         ██ ██    ██ ██   ██ ██          ██    ██ ██      ██ ████   ██ ██       ██      
//         ██ ██    ██ ██████  ███████     ██    ██ ███████ ██ ██ ██  ██ ██   ███ ███████ 
//    ██   ██ ██    ██ ██   ██      ██     ██    ██      ██ ██ ██  ██ ██ ██    ██      ██ 
//     █████   ██████  ██████  ███████      ██████  ███████ ██ ██   ████  ██████  ███████ 
//                                                                                        
//                                                                                        

using Inputs  = std::vector<std::string>;
using Outputs = std::vector<std::string>;
using JobList = std::vector<Job>;



//         ██  ██████  ██████  ███████     ██████  ██    ██ ██████  ██      ██  ██████    
//         ██ ██    ██ ██   ██ ██          ██   ██ ██    ██ ██   ██ ██      ██ ██         
//         ██ ██    ██ ██████  ███████     ██████  ██    ██ ██████  ██      ██ ██         
//    ██   ██ ██    ██ ██   ██      ██     ██      ██    ██ ██   ██ ██      ██ ██         
//     █████   ██████  ██████  ███████     ██       ██████  ██████  ███████ ██  ██████    
//                                                                                        
//                                                                                        
//     █████   ██████   ██████  ██████  ███████  ██████   █████  ████████ ███████ ███████ 
//    ██   ██ ██       ██       ██   ██ ██      ██       ██   ██    ██    ██      ██      
//    ███████ ██   ███ ██   ███ ██████  █████   ██   ███ ███████    ██    █████   ███████ 
//    ██   ██ ██    ██ ██    ██ ██   ██ ██      ██    ██ ██   ██    ██    ██           ██ 
//    ██   ██  ██████   ██████  ██   ██ ███████  ██████  ██   ██    ██    ███████ ███████ 
//                                                                                        
//                                                                                        


class Job
{
public:
    Job(const Job&) = default;

    static Job FromInstruction(Semantic::Enviroment& environment, const Semantic::Instruction& instruction) noexcept;

private:
    Job();

    std::string            name;

    Inputs                 inputs;
    Outputs                outputs;

    Semantic::Task::Instrs instructions;
    Semantic::Task::Params parameters;
    Semantic::Interpreter  interpreter;

    bool                   parallelizable;
};





//         ██  ██████  ██████  ███████     ██████  ██    ██ ██████  ██      ██  ██████ 
//         ██ ██    ██ ██   ██ ██          ██   ██ ██    ██ ██   ██ ██      ██ ██      
//         ██ ██    ██ ██████  ███████     ██████  ██    ██ ██████  ██      ██ ██      
//    ██   ██ ██    ██ ██   ██      ██     ██      ██    ██ ██   ██ ██      ██ ██      
//     █████   ██████  ██████  ███████     ██       ██████  ██████  ███████ ██  ██████ 
//                                                                                     
//                                                                                     
//    ███████ ██    ██ ███    ██  ██████ ████████ ██  ██████  ███    ██ ███████        
//    ██      ██    ██ ████   ██ ██         ██    ██ ██    ██ ████   ██ ██             
//    █████   ██    ██ ██ ██  ██ ██         ██    ██ ██    ██ ██ ██  ██ ███████        
//    ██      ██    ██ ██  ██ ██ ██         ██    ██ ██    ██ ██  ██ ██      ██        
//    ██       ██████  ██   ████  ██████    ██    ██  ██████  ██   ████ ███████        
//                                                                                     
//                                                                                     

JobList FromEnv(Semantic::Enviroment& environment) noexcept;



END_MODULE(Jobs)




#endif /* __ARCANA_JOBS_H__ */